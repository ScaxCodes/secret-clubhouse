<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ScaxCodes Clubhouse</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div class="message-container">
      <% if (currentUser) { %>
      <p class="clubhouse-status">
        <strong>Clubhouse Status:</strong> <%= isClubmember ? "Member" : "Guest"
        %>
      </p>

      <h1>
        Welcome<%= isClubmember ? " to the Clubhouse" : "" %>, <%=
        currentUser.username %>!
      </h1>

      <div class="messages">
        <h2>Stories from the Clubhouse</h2>

        <% if (messages && messages.length > 0) { %>
        <ul>
          <% messages.forEach((message) => { %>
          <li class="message">
            <h3><%= message.title %></h3>
            <p><%= message.body %></p>

            <% if (isClubmember) { %>
            <p class="meta">
              <strong>Author:</strong> <%= message.author %> |
              <strong>Date:</strong> <%= new
              Date(message.timestamp).toLocaleString() %>
            </p>
            <% } %>
          </li>
          <% }) %>
        </ul>
        <% } else { %>
        <p>No stories yet!</p>
        <% } %>
      </div>

      <p>
        <% if (!isClubmember) { %>
        <a href="/join-the-club">Join the Clubhouse</a> | <% } %>
        <a href="/logout">Logout</a>
      </p>
      <% } else { %>
      <h1>The Secret Clubhouse üïµÔ∏è‚Äç‚ôÇÔ∏è</h1>
      <form action="/login" method="POST">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required />
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required />
        <button type="submit">Login</button>
      </form>
      <p>Don't have an account? <a href="/signup">Signup here</a></p>
      <% } %>
    </div>
  </body>
</html>
